(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{559:function(e,t,o){var content=o(567);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(74).default)("212e4890",content,!0,{sourceMap:!1})},566:function(e,t,o){"use strict";o(559)},567:function(e,t,o){var r=o(73)(!1);r.push([e.i,".ui-file-upload-droparea{border:3px dashed var(--bs-gray-300);display:flex;align-items:center;justify-content:center;height:200px}",""]),e.exports=r},568:function(e,t,o){"use strict";o.r(t);o(50),o(26),o(12),o(34),o(42);var r={props:{type:{default:"base64"},folder:{default:""},multiple:{default:!0},dropArea:{default:!0},uploadOnSelect:{default:!0},dropdownLeft:{default:!0}},data:function(){return{filesToUpload:[]}},methods:{openFileBrowser:function(){var e=this;Object.assign(document.createElement("input"),{type:"file",multiple:this.multiple,onchange:function(t){e.uploadFiles(Array.from(t.target.files))}}).click()},uploadFiles:function(e){var t=this;(e=Array.isArray(e)?e:[e]).forEach((function(e){var o={name:e.name,type:e.type,size:e.size,sizeUploaded:0,percent:0,success:!1,error:!1,file:e};t.uploadOnSelect&&t.startFileUpload(o),t.filesToUpload.push(o)}))},startFileUpload:function(e){var t=this,data=new FormData;data.append("file",e.file,e.file.name),data.append("folder",this.folder),e.percent=0,e.sizeUploaded=0,e.success=!1,e.error=!1,this.$axios.post("/api/files/upload",data,{onUploadProgress:function(t){e.percent=Math.round(100*t.loaded/t.total),e.sizeUploaded=t.loaded}}).then((function(o){e.success=!0,t.$emit("success",o.data)})).catch((function(o){e.error=o.response.data.message||"Erro desconhecido",t.$emit("error",o.response.data)}))}}},l=(o(566),o(16)),component=Object(l.a)(r,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{position:"relative"}},[o("button",{staticClass:"btn btn-outline-light",attrs:{type:"button"},on:{click:function(t){return e.openFileBrowser()}}},[e._v("\n        Upload "),o("i",{staticClass:"fas fa-fw fa-upload"})]),e._v(" "),e.filesToUpload.length>0?o("div",{staticClass:"ui-file-upload-files mt-2 bg-white border border-bottom-0 shadow-sm",style:"position:absolute; top:100%; "+(e.dropdownLeft?"left":"right")+":0; width:300px;"},[e._l(e.filesToUpload,(function(t){return o("div",{staticClass:"d-flex align-items-center  border-bottom p-1"},[o("div",{staticClass:"flex-grow-1 text-start"},[o("div",[e._v(e._s(t.name||"Arquivo"))]),e._v(" "),o("div",{staticClass:"progress",staticStyle:{height:"10px"}},[o("div",{staticClass:"progress-bar progress-bar-striped",class:{"bg-success":t.success,"bg-danger":t.error,"progress-bar-animated":!t.success&&!t.error},style:"width:"+(t.percent||0)+"%;"})]),e._v(" "),t.error?o("small",{staticClass:"d-block text-danger"},[e._v("\n                    "+e._s(t.error||"Erro desconhecido")+".\n                    "),o("a",{staticClass:"text-danger fw-bold",attrs:{href:"javascript:;"},on:{click:function(o){return e.startFileUpload(t)}}},[e._v("Tentar novamente")])]):e._e()]),e._v(" "),o("div",[o("button",{staticClass:"btn btn-sm text-danger",attrs:{type:"button"},on:{click:function(o){e.filesToUpload.splice(e.filesToUpload.indexOf(t),1)}}},[o("i",{staticClass:"fas fa-fw fa-times"})])])])})),e._v(" "),e.filesToUpload.length>0&&e.filesToUpload.length==e.filesToUpload.filter((function(e){return e.success||e.error})).length?o("div",{staticClass:"text-center border-bottom"},[o("button",{staticClass:"btn w-100",attrs:{type:"button"},on:{click:function(t){e.filesToUpload=[]}}},[e._v("\n                Ok\n            ")])]):e._e()],2):e._e()])}),[],!1,null,null,null);t.default=component.exports}}]);