var p=Object.defineProperty;var l=Object.getOwnPropertySymbols;var m=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;var s=(t,e,a)=>e in t?p(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,n=(t,e)=>{for(var a in e||(e={}))m.call(e,a)&&s(t,a,e[a]);if(l)for(var a of l(e))c.call(e,a)&&s(t,a,e[a]);return t};import{_ as v,u as _,r,o as g,c as S,a as d}from"./entry-c6c6a655.mjs";const y={props:{modelValue:{default:"",type:[Boolean,Number,String,Object]},label:{default:"Arquivo",type:String},returnType:{default:"id",type:String},previewHeight:{default:"250px",type:String}},watch:{"$props.modelValue":{async handler(){this.fileFind()}}},data(){return{fileUrlRandom:Math.round(Math.random()*9999),fileSave:_({method:"post",url:"/api/files/save",data:{content:!1}})}},methods:{emitValue(){if(this.returnType=="object"){this.$emit("update:modelValue",n({},this.fileSave.data));return}let t=this.fileSave.data[this.returnType]||!1;this.$emit("update:modelValue",t)},async fileUpload(t){this.fileUrlRandom=Math.round(Math.random()*9999),this.fileSave.data.content=t;let e=await this.fileSave.submit();this.fileSave.data=e.data,this.fileSave.data.url=e.data.url,this.emitValue()},async fileFind(){if(this.returnType=="object"){if(isNaN(this.modelValue.id))return;this.fileSave.data=(await this.$axios.get(`/api/files/find/${this.modelValue.id}`)).data}else if(this.returnType=="id")this.fileSave.data=(await this.$axios.get(`/api/files/find/${this.modelValue}`)).data;else if(this.returnType=="url"){const t={url:this.modelValue},e=(await this.$axios.get("/api/files/search/",{params:t})).data;e.data[0]&&(this.fileSave.data=e.data[0])}}},mounted(){this.fileFind()}};function V(t,e,a,b,i,o){const u=r("v-img"),f=r("v-file-input");return g(),S("div",null,[d(u,{class:"bg-grey-lighten-3",width:"100%",height:a.previewHeight,"aspect-ratio":1,src:i.fileSave.data.url+"?"+i.fileUrlRandom},null,8,["height","src"]),d(f,{label:a.label,"hide-details":"","onUpdate:modelValue":e[0]||(e[0]=h=>o.fileUpload(i.fileSave.data.content=h[0]))},null,8,["label"])])}var T=v(y,[["render",V]]);export{T as _};
